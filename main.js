var pendragonData = [
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-captain.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-figurehead.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-deckmarshall.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-gunmarshall.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-squadmarshall.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/11/oba-card-pendragon-chivvierr.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-gunschampion.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-squadchampion.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-shadowcaster.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-gunbots.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-fusebots.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-deckpaws.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-deckpaws.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-deckpaws.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-marksmen.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-marksmen.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-marksmen.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-cannoneers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-cannoneers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-cannoneers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-armouredfiends.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-armouredfiends.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-armouredfiends.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-fiends.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-fiends.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pendragon-fiends.jpg",
	"event",
	"event"
];

var piratesData = [
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-captain.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-figurehead.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-deckchief.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-meleechief.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-masterchief.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-fickerfinder.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-riggingbots.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/10/oba-card-pirates-botlettii.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-riggers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-riggers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-riggers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-deckers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-deckers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-deckers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-spotters.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-spotters.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-spotters.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-smokers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-smokers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-smokers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-bruisers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-bruisers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-bruisers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-breakers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-breakers.jpg",
	"http://themaverickmuse.com/wp-content/uploads/2014/09/oba-card-pirates-breakers.jpg",
	"event",
	"event"
];

var eventData = [
	"event01.jpg",
	"event02.jpg",
	"event03.jpg",
	"event04.jpg",
	"event05.jpg",
	"event06.jpg"
];

(function(){
	$('#pirateData').click(function(){
		data = piratesData;
		init();
	});
	$('#pendragonsData').click(function(){
		data = pendragonData;
		init();
	});	
})()


function init() {
	//show/hide elements
	$('#statusBar').show();
	$('#buttbar').remove();

	//populate images
	while (data.length > 0) {
		var tempUrl = data.splice(Math.floor(Math.random() * data.length), 1);
		if(tempUrl.toString() === "event"){
			tempUrl = eventData.splice(Math.floor(Math.random() * eventData.length), 1);
			$('#thediv').prepend('<img class="event" src="' + tempUrl + '"></img>');
		} else {
			$('#thediv').prepend('<img src="' + tempUrl + '"></img>');	
		}
		
	}

	bindEvents();
	uiUpdate();
}

function bindEvents(){
	// bind some stuff on images
	$('img').click(function() {
		if ($(this).hasClass('selected')) {
			// remove event
			if($(this).hasClass('event')){
				$(this).remove();	
			} else {
				// discard card
				$(this)
					.removeClass('selected')
					.addClass('discarded')
					.appendTo($('#thediv'));
			}
			
			uiUpdate();
		} else if ($('img').hasClass('selected')) {
			//rig
			var tempUrl = $(this).attr('src');
			$(this).attr('src', $('img.selected').attr('src'));
			$('img.selected').attr('src', tempUrl).removeClass('selected');
		} else {
			//select card
			$(this).addClass('selected');
		}
	});

	//bind buttons
	$('#recoverBtn').click(function(){
		if($('img.discarded').length > 0){
			$('img.discarded:first').removeClass('discarded');
		} else {
			alert('no cards to recover');
		}
		uiUpdate();
	});
}

function uiUpdate(){
	//update HP
	$('#hp').html('HP:' + ($('img').length - $('img.discarded').length));
}
